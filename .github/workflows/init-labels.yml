name: Initialize Labels

on:
    workflow_dispatch: # æ‰‹åŠ¨è§¦å‘

jobs:
    init-labels:
        runs-on: ubuntu-latest
        permissions:
            issues: write

        steps:
            - name: Create or Update Labels
              uses: actions/github-script@v7
              with:
                  script: |
                      const labels = [
                        // çŠ¶æ€æ ‡ç­¾ï¼ˆè“è‰² #0969DAï¼‰
                        { name: 'çŠ¶æ€:è‰ç¨¿', color: '0969DA', description: 'é»˜è®¤çŠ¶æ€ï¼Œåšå®¢ä¸æ˜¾ç¤º' },
                        { name: 'çŠ¶æ€:å·²å‘å¸ƒ', color: '0969DA', description: 'æ­£å¼å‘å¸ƒï¼Œåšå®¢å¯è§' },
                        { name: 'çŠ¶æ€:å·²å½’æ¡£', color: '0969DA', description: 'å½’æ¡£é¡µå¯è§ï¼Œé¦–é¡µä¸æ˜¾ç¤º' },
                        { name: 'çŠ¶æ€:å·²ä½œåºŸ', color: '0969DA', description: 'å®Œå…¨ä¸æ˜¾ç¤º' },
                        
                        // åˆ†ç±»æ ‡ç­¾ï¼ˆç»¿è‰² #1A7F37ï¼‰
                        { name: 'åˆ†ç±»:å‰ç«¯å¼€å‘', color: '1A7F37', description: 'å‰ç«¯æŠ€æœ¯ç›¸å…³' },
                        { name: 'åˆ†ç±»:åç«¯å¼€å‘', color: '1A7F37', description: 'åç«¯æŠ€æœ¯ç›¸å…³' },
                        { name: 'åˆ†ç±»:DevOps', color: '1A7F37', description: 'è¿ç»´éƒ¨ç½²ç›¸å…³' },
                        { name: 'åˆ†ç±»:äººå·¥æ™ºèƒ½', color: '1A7F37', description: 'AI/MLç›¸å…³' },
                        { name: 'åˆ†ç±»:ç³»ç»Ÿè®¾è®¡', color: '1A7F37', description: 'æ¶æ„è®¾è®¡ç›¸å…³' },
                        { name: 'åˆ†ç±»:æ•™ç¨‹', color: '1A7F37', description: 'æ•™ç¨‹ç±»æ–‡ç« ' },
                        { name: 'åˆ†ç±»:ç»éªŒåˆ†äº«', color: '1A7F37', description: 'ç»éªŒæ€»ç»“ç±»' },
                        
                        // åŠŸèƒ½æ ‡ç­¾ï¼ˆç´«è‰² #8250DFï¼‰
                        { name: 'åŠŸèƒ½:ç½®é¡¶', color: '8250DF', description: 'é¦–é¡µç½®é¡¶æ˜¾ç¤º' },
                        { name: 'åŠŸèƒ½:ç²¾é€‰', color: '8250DF', description: 'HeroåŒºåŸŸå±•ç¤º' },
                        { name: 'åŠŸèƒ½:çƒ­é—¨', color: '8250DF', description: 'çƒ­é—¨æ¨è' },
                      ];

                      for (const label of labels) {
                        try {
                          // å°è¯•è·å–æ ‡ç­¾
                          await github.rest.issues.getLabel({
                            owner: context.repo.owner,
                            repo: context.repo.repo,
                            name: label.name
                          });
                          
                          // å¦‚æœæ ‡ç­¾å­˜åœ¨ï¼Œæ›´æ–°å®ƒ
                          await github.rest.issues.updateLabel({
                            owner: context.repo.owner,
                            repo: context.repo.repo,
                            name: label.name,
                            color: label.color,
                            description: label.description
                          });
                          
                          console.log(`âœ… æ›´æ–°æ ‡ç­¾: ${label.name}`);
                        } catch (error) {
                          if (error.status === 404) {
                            // æ ‡ç­¾ä¸å­˜åœ¨ï¼Œåˆ›å»ºå®ƒ
                            await github.rest.issues.createLabel({
                              owner: context.repo.owner,
                              repo: context.repo.repo,
                              name: label.name,
                              color: label.color,
                              description: label.description
                            });
                            
                            console.log(`âœ¨ åˆ›å»ºæ ‡ç­¾: ${label.name}`);
                          } else {
                            console.error(`âŒ å¤„ç†æ ‡ç­¾ ${label.name} æ—¶å‡ºé”™:`, error.message);
                          }
                        }
                      }

                      console.log('\nğŸ‰ æ ‡ç­¾åˆå§‹åŒ–å®Œæˆï¼');
